## 프로그램 구현 부분 진행상황
### 1. 시스템 목표

사용자 맞춤형 추천 시스템을 구축하여, YouTube API를 활용해 개인화된 건강 관련 영상을 제공.

### 2. 구현의 주요 단계

1) 사용자 입력 데이터 처리
입력 항목:
카테고리: "머리가 아플 때", "기운이 없을 때" 등.
개인 정보: 나이, 흡연 여부, 음주 여부 등.
처리 방법:
선택된 카테고리와 관련된 질병 및 증상 키워드를 내부적으로 매핑.
개인 정보를 바탕으로 특정 키워드의 중요도를 강화.

2) YouTube API를 활용한 데이터 수집
YouTube Data API:
search 엔드포인트를 사용해 사용자 입력에 맞는 키워드 기반 영상 검색.
videos 엔드포인트를 통해 조회수, 좋아요 수 등 세부 메타데이터를 가져옴.

3) 추천 로직 구성
추천 점수를 계산하여 상위 N개의 영상을 선택.
추천 점수 계산 공식:
추천 점수 = 𝛼(텍스트 유사도)+𝛽(인기 점수)+𝛾(사용자 특성 반영)추천 점수=α(텍스트 유사도)+
(인기 점수)+γ(사용자 특성 반영)

텍스트 유사도:
TF-IDF 유사도: 사용자 키워드와 영상 제목/설명/태그 간 유사도.
NLP 기반 유사도: BERT/Sentence-BERT를 사용해 문장 간 의미적 유사도 평가.
인기 지표: 조회수, 좋아요 수 등 메타데이터를 정규화하여 추가 점수로 활용.
사용자 특성 반영: 사용자 나이, 흡연 여부 등에 따라 특정 키워드와 관련된 영상을 강조.

4) 결과 반환
점수가 높은 순서대로 정렬한 영상 목록을 사용자에게 제공.
반환 데이터: 영상 제목, 설명, 썸네일, YouTube 링크.

### 3. 시스템 구현 코드

Backend:
Flask를 사용해 웹 서버 구성.
YouTube API를 호출하고 추천 로직을 수행.



Frontend:
HTML/JavaScript를 사용해 사용자 입력을 처리.
추천 결과를 JSON 형태로 받아 화면에 표시.

### 4. 유튜브 시청 시간 추적

YouTube API 자체적으로는 개별 사용자의 시청 시간 데이터를 제공하지 않지만, 다음 대안으로 구현 가능:
YouTube IFrame API:
클라이언트에서 onStateChange 이벤트를 활용해 사용자가 재생/일시정지한 시간 추적 가능.
JavaScript를 활용하여 시청 누적 시간을 계산.
Google OAuth 2.0:
사용자가 시청 기록 공유에 동의할 경우, 제한적으로 Watch History 데이터를 사용할 수 있으나 복잡함.

## 추천 알고리즘 부분 진행상황
### 1. 영상 카테고리 3개 추천

(1) 사용자에게 건강 관련된 데이터를 입력받는다. 입력 받은 데이터를 가지고 건강 상태를 파악하여 관련 영상 카테고리를 추천이 목적. 
- 어떤 건강 관련된 데이터를 받을지는 (2)에서 설명
- 캐글 데이터 활용 : 캐글의 데이터를 가지고 모델을 학습시킨뒤 사용자의 데이터를 넣어 건강 상태 진단
- 캐글의 데이터 예시 : 심혈관 질환 위험진단 데이터셋, 수면장애 진단 데이터셋 등등

(2) 캐글의 데이터셋에서 사용자에게 입력받기 쉽고 설명력이 좋은 변수들을 선택하고 Logistic Regression모델 사용
- 심혈관질환 위험진단 데이터 셋에서 선택한 변수 : 키, 몸무게, 혈압, 흡연 및 음주 여부, 신체활동 여부
- 수면장애 진단 데이터 셋에서 선택한 변수 : 수면시간, 신체활동레벨, 혈압, 심박수, 하루 걸음 수
- 모델 성능 지표 (F1 score - accuracy) : 0.93(수면장애 데이터 셋), 0.71(심혈관질환 데이터 셋)

(3) 사용자에게 키, 몸무게, 혈압, 흡연 및 음주 여부, 신체활동 여부, 수면시간, 신체활동레벨, 심박수, 하루 걸음 수의 데이터를
받고 심혈관 질환 위험 및 수면 장애 진단을 한다.
- 수면 장애 O/ X : O이면 '잠이 오지 않을때' 와 같이 키워드로 영상 카테고리 추천
- 심혈관질환 위험 O/X : O이면 '가슴이 답답할 때'와 같이 키워드로 영상카테 고리 추천
- 직접 병명을 언급하여 영상 카테고리를 추천하려 했으나 의료법 때문에 병명과 관련된 증상이나 키워드로 대체
- 현재 캐글의 데이터셋 2개를 사용했지만 계속 개발을 하면서 데이터셋을 늘려나갈 예정
- 데이터셋을 늘렸다면 여러 병명(4개 이상)에 O판정이 났다면 모델 성능이 높은 순으로 3개를 추천
- 병명 판정이 3개보다 낮다면 다른 로직(이후 개발)을 사용하여 영상 카테고리 3개 추천

### 2. 영상 카테고리를 클릭(ex. '잠이 오지 않을 때')했을 때 관련 영상 나열

- 사용자의 시청이력이 없을 때 영상의 조회수 기준으로 상단부터 나열
- 사용자의 시청이력이 쌓였을 때 사용자의 시청시간을 가지고 점수를 1~5점까지 입력
- 여러 사용자의 user_id, contents_id, rating을 DB에 저장
- 사용자의 시청한 영상을 바탕으로 시청하지 않은 영상 중 가장 볼 것 같은 영상 추천 
- 추천알고리즘 (KNN, SVD 등) 사용 예정